language: go
dist: trusty

go:
- 1.12.x

env:
  global:
    - GO111MODULE=on

addons:
  sonarcloud:
    organization: "jenkins-zh"
    token:
      secure: 3caad1285eb0edf2b4f65ee07b3cd8edde6c5176 # encrypted value of your token

script:
  - make clean
  # Execute some tests
  - make test
  # And finally run the SonarQube analysis - read the "sonar-project.properties"
  # file to see the specific configuration
  - curl -LsS https://sonarcloud.io/static/cpp/build-wrapper-linux-x86.zip > build-wrapper-linux-x86.zip
  - unzip build-wrapper-linux-x86.zip
  - build-wrapper-linux-x86/build-wrapper-linux-x86-64 --out-dir bw-output make clean all
  - sonar-scanner
